# OCWatch - OpenCode Activity Monitor

OCWatch is a real-time TUI dashboard for monitoring OpenCode agent activity. It tails OpenCode logs to provide insights into agent modes, session hierarchies, and tool call activity that are not easily visible through standard interfaces.

## Features

- **Real-time agent monitoring**: See exactly which agents are active and what they are doing.
- **Nested tree view**: Visual representation of the session → agents hierarchy.
- **Plan progress**: Integrated tracking of plan progress from `.sisyphus/boulder.json`.
- **Tool calls**: Live monitoring of tool call activity with metadata.
- **Agent modes**: Clear display of agent execution modes (e.g., "prometheus mode=all").

## Installation

To install OCWatch, ensure you have Go installed on your system and run:

```bash
go install github.com/tomas/ocwatch@latest
```

## Usage

Start OCWatch by running the command in your terminal:

```bash
ocwatch [--project /path] [--data-dir /path]
```

### Options:
- `--project /path`: Specify the project directory for plan tracking.
- `--data-dir /path`: Path to a custom OpenCode data directory (default: `~.local/share/opencode`).

## Keybindings

| Key | Action |
|-----|--------|
| `q`, `Ctrl+C` | Quit OCWatch |
| `↑`/`↓` | Scroll through active panel |
| `Tab` | Switch focus between panels (Sessions, Agents, Tools) |

## Requirements

- **OS**: macOS
- **OpenCode**: Must be installed and running to generate logs.

## How it works

OCWatch works by tailing the log files generated by OpenCode in `~/.local/share/opencode/log/`. It uses a custom parser to extract structured information from these logs, including:
- **Session IDs**: Correlating activity across different log lines.
- **Agent Modes**: Detecting when agents are running in specific modes like `prometheus`.
- **Tool Activity**: Monitoring which tools are being invoked.

The TUI is built using the [Bubble Tea](https://github.com/charmbracelet/bubbletea) framework, providing a responsive and low-latency experience.

## Screenshot

[Screenshot to be added]
